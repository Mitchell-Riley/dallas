package compiler

type Token struct {
	Name       string
	DoubleByte bool
}

//oneBytes is a map that contains all one-byte ti-basic tokens
var oneBytes = map[string]byte{
	"->DMS":       0x01,
	"->Dec":       0x02,
	"->Frac":      0x03,
	"->":          0x04,
	"Boxplot":     0x05,
	"[":           0x06,
	"]":           0x07,
	"{":           0x08,
	"}":           0x09,
	"rad":         0x0a,
	"deg":         0x0b,
	"^-1":         0x0c,
	"^2":          0x0d, // squared
	"^T":          0x0e, // T aka transpose
	"^3":          0x0f, // cubed
	"(":           0x10,
	")":           0x11,
	"round(":      0x12,
	"pxl-Test(":   0x13,
	"augment(":    0x14,
	"rowSwap(":    0x15,
	"row+(":       0x16,
	"*row(":       0x17,
	"*row+(":      0x18,
	"max(":        0x19,
	"min(":        0x1a,
	"R->Pr(":      0x1b,
	"R->Pt(":      0x1c,
	"P->Rx(":      0x1d,
	"P->Ry(":      0x1e,
	"median(":     0x1f,
	"randM(":      0x20,
	"mean(":       0x21,
	"solve(":      0x22,
	"seq(":        0x23,
	"fnInt(":      0x24,
	"nDeriv(":     0x25,
	"fMin(":       0x27,
	"fMax(":       0x28,
	" ":           0x29,
	"\"":          0x2a,
	",":           0x2b,
	"i":           0x2c,
	"!":           0x2d,
	"CubicReg":    0x2e,
	"QuartReg":    0x2f,
	"0":           0x30,
	"1":           0x31,
	"2":           0x32,
	"3":           0x33,
	"4":           0x34,
	"5":           0x35,
	"6":           0x36,
	"7":           0x37,
	"8":           0x38,
	"9":           0x39,
	".":           0x3A,
	"EX":          0x3b, // 10^n
	"or":          0x3c,
	"xor":         0x3d,
	":":           0x3e,
	"\n":          0x3f,
	" and ":       0x40, // incorps space at beginning and end
	"A":           0x41,
	"B":           0x42,
	"C":           0x43,
	"D":           0x44,
	"E":           0x45,
	"F":           0x46,
	"G":           0x47,
	"H":           0x48,
	"I":           0x49,
	"J":           0x4a,
	"K":           0x4b,
	"L":           0x4c,
	"M":           0x4d,
	"N":           0x4e,
	"O":           0x4f,
	"P":           0x50,
	"Q":           0x51,
	"R":           0x52,
	"S":           0x53,
	"T":           0x54,
	"U":           0x55,
	"V":           0x56,
	"W":           0x57,
	"X":           0x58,
	"Y":           0x59,
	"Z":           0x5a,
	"theta":       0x5b,
	"prgm":        0x5f,
	"Radian":      0x64,
	"Degree":      0x65,
	"Normal":      0x66,
	"Sci":         0x67,
	"Eng":         0x68,
	"Float":       0x69,
	"=":           0x6a,
	"<":           0x6b,
	">":           0x6c,
	"<=":          0x6d, // lessthan or equal
	">=":          0x6e, // greater than or equal
	"!=":          0x6f, // not equal
	"+":           0x70,
	"-":           0x71, // subtraction
	"Ans":         0x72,
	"Fix":         0x73,
	"Horiz":       0x74,
	"Full":        0x75,
	"Func":        0x76,
	"Param":       0x77,
	"Polar":       0x78,
	"Seq":         0x79,
	"IndpntAuto":  0x7a,
	"IndpntAsk":   0x7b,
	"DependAuto":  0x7c,
	"DependAsk":   0x7d,
	"weirdmark":   0x7f, // seriously what is this thing
	"plusmark":    0x80,
	"dotmark":     0x81,
	"*":           0x82,
	"/":           0x83,
	"Trace":       0x84,
	"CLrDraw":     0x85,
	"ZStandard":   0x86,
	"ZTrig":       0x87,
	"ZBox":        0x88,
	"ZoomIn":      0x89,
	"ZoomOut":     0x8A,
	"ZSquare":     0x8B,
	"ZInteger":    0x8C,
	"ZPrevious":   0x8D,
	"ZDecimal":    0x8E,
	"ZoomStat":    0x8F,
	"ZoomRcl":     0x90,
	"PrintScreen": 0x91,
	"ZoomSto":     0x92,
	"Text(":       0x93,
	"nPr":         0x94,
	"nCr":         0x95,
	"FnOn":        0x96,
	"FnOff":       0x97,
	"StorePic":    0x98,
	"RecallPic":   0x99,
	"StoreGDB":    0x9A,
	"RecallGDB":   0x9B,
	"Line(":       0x9C,
	"Vertical":    0x9D,
	"Pt-On(":      0x9E,
	"Pt-Off(":     0x9F,
	"Pt-Change(":  0xA0,
	"Pxl-On(":     0xA1,
	"Pxl-Off(":    0xA2,
	"Pxl-Change(": 0xA3,
	"Shade(":      0xA4,
	"Circle(":     0xA5,
	"Horizontal":  0xA6,
	"Tangent(":    0xA7,
	"DrawInv":     0xA8,
	"DrawF":       0xA9,
	"rand":        0xAB,
	"pi":          0xAC,
	"getKey":      0xAD,
	"'":           0xAE,
	"?":           0xAF,
	// "-":           0xB0, // negative
	"int(":         0xB1,
	"abs(":         0xB2,
	"det(":         0xB3,
	"identity(":    0xB4,
	"dim(":         0xB5,
	"sum(":         0xB6,
	"prod(":        0xB7,
	"not(":         0xB8,
	"iPart(":       0xB9,
	"fPart(":       0xBA,
	"sqrt(":        0xBC, // √(
	"crt(":         0xBD, // cube root
	"ln(":          0xBE,
	"e^(":          0xBF, // e to a power
	"log(":         0xC0,
	"10^(":         0xC1,
	"sin(":         0xC2,
	"arcsin(":      0xC3,
	"cos(":         0xC4,
	"arccos(":      0xC5,
	"tan(":         0xC6,
	"arctan(":      0xC7,
	"sinh(":        0xC8,
	"arcsinh(":     0xC9,
	"cosh(":        0xCA,
	"arccosh(":     0xCB,
	"tanh(":        0xCC,
	"arctanh(":     0xCD,
	"If ":          0xCE, // incorps space
	"Then":         0xCF,
	"Else":         0xD0,
	"While ":       0xD1,
	"Repeat ":      0xD2,
	"For(":         0xD3,
	"End":          0xD4,
	"Return":       0xD5,
	"Lbl ":         0xD6, //incorps space
	"Goto ":        0xD7, // incorps space
	"Pause":        0xD8,
	"Stop":         0xD9,
	"IS>(":         0xDA,
	"DS<(":         0xDB,
	"Input ":       0xDC, // incorps space
	"Prompt ":      0xDD, // prompt incorporates a space
	"Disp ":        0xDE, // disp incorporates a space
	"DispGraph":    0xDF,
	"Output(":      0xE0,
	"ClrHome":      0xE1,
	"Fill(":        0xE2,
	"SortA(":       0xE3,
	"SortD(":       0xE4,
	"DispTable":    0xE5,
	"Menu(":        0xE6,
	"Send(":        0xE7,
	"Get(":         0xE8,
	"PlotsOn":      0xE9,
	"PlotsOff":     0xEA,
	"lists":        0xEB,
	"Plot1(":       0xEC,
	"Plot2(":       0xED,
	"Plot3(":       0xEE,
	"^":            0xF0,
	"xrt(":         0xF1, //x root of
	"1-Var Stats":  0xF2,
	"2-Var Stats":  0xF3,
	"LinReg(a+bx)": 0xF4,
	"ExpReg":       0xF5,
	"LnReg":        0xF6,
	"PwrReg":       0xF7,
	"Med-Med":      0xF8,
	"QuadReg":      0xF9,
	"ClrList":      0xFA,
	"ClrTable":     0xFB,
	"Histogram":    0xFC,
	"xyLine":       0xFD,
	"Scatter":      0xFE,
	"LinReg(ax+b)": 0xFF,
}

var twoBytes = map[string]uint16{
	"[A]": 0x5C00,
	"[B]": 0x5C01,
	"[C]": 0x5C02,
	"[D]": 0x5C03,
	"[E]": 0x5C04,
	"[F]": 0x5C05,
	"[G]": 0x5C06,
	"[H]": 0x5C07,
	"[I]": 0x5C08,
	"[J]": 0x5C09,

	"L1": 0x5d00,
	"L2": 0x5d01,
	"L3": 0x5d02,
	"L4": 0x5d03,
	"L5": 0x5d04,
	"L6": 0x5d05,

	"Y1":  0x5e10,
	"Y2":  0x5e11,
	"Y3":  0x5e12,
	"Y4":  0x5e13,
	"Y5":  0x5e14,
	"Y6":  0x5e15,
	"Y7":  0x5e16,
	"Y8":  0x5e17,
	"Y9":  0x5e18,
	"Y0":  0x5e19,
	"X1T": 0x5e20,
	"Y1T": 0x5e21,
	"X2T": 0x5e22,
	"Y2T": 0x5e23,
	"X3T": 0x5e24,
	"Y3T": 0x5e25,
	"X4T": 0x5e26,
	"Y4T": 0x5e27,
	"X5T": 0x5e28,
	"Y5T": 0x5e29,
	"X6T": 0x5e2A,
	"Y6T": 0x5e2B,
	"r1":  0x5e40,
	"r2":  0x5e41,
	"r3":  0x5e42,
	"r4":  0x5e43,
	"r5":  0x5e44,
	"r6":  0x5e45,

	// 5E 80 — u
	// 5E 81 — v
	// 5E 82 — w

	"Pic1": 0x6000,
	"Pic2": 0x6001,
	"Pic3": 0x6002,
	"Pic4": 0x6003,
	"Pic5": 0x6004,
	"Pic6": 0x6005,
	"Pic7": 0x6006,
	"Pic8": 0x6007,
	"Pic9": 0x6008,
	"Pic0": 0x6009,

	"GDB1": 0x6100,
	"GDB2": 0x6101,
	"GDB3": 0x6102,
	"GDB4": 0x6103,
	"GDB5": 0x6104,
	"GDB6": 0x6105,
	"GDB7": 0x6106,
	"GDB8": 0x6107,
	"GDB9": 0x6108,
	"GDB0": 0x6109,

	"ZXscl":   0x6300,
	"ZYscl":   0x6301,
	"Xscl":    0x6302,
	"Yscl":    0x6303,
	"u(nMin)": 0x6304,
	"v(nMin)": 0x6305,
	// "u(n-1)":     0x6306,
	// "v(n-1)":     0x6307,
	"Zu(nMin)":   0x6308,
	"Zv(nMin)":   0x6309,
	"Xmin":       0x630A,
	"Xmax":       0x630B,
	"Ymin":       0x630C,
	"Ymax":       0x630D,
	"Tmin":       0x630E,
	"Tmax":       0x630F,
	"θmin":       0x6310,
	"θmax":       0x6311,
	"ZXmin":      0x6312,
	"ZXmax":      0x6313,
	"ZYmin":      0x6314,
	"ZYmax":      0x6315,
	"Zθmin":      0x6316,
	"Zθmax":      0x6317,
	"ZTmin":      0x6318,
	"ZTmax":      0x6319,
	"TblStart":   0x631A,
	"PlotStart":  0x631B,
	"ZPlotStart": 0x631C,
	"nMax":       0x631D,
	"ZnMax":      0x631E,
	"nMin":       0x631F,
	"ZnMin":      0x6320,
	"ΔTbl":       0x6321,
	"Tstep":      0x6322,
	"θstep":      0x6323,
	"ZTstep":     0x6324,
	"Zθstep":     0x6325, //zthetastep
	"ΔX":         0x6326,
	"ΔY":         0x6327,
	"XFact":      0x6328,
	"YFact":      0x6329,
	"TblInput":   0x632A,
	"N":          0x632B,
	"I%":         0x632C,
	"PV":         0x632D,
	"PMT":        0x632E,
	"FV":         0x632F,
	"P/Y":        0x6330,
	"C/Y":        0x6331,
	"w(nMin)":    0x6332,
	"Zw(nMin)":   0x6333,
	"PlotStep":   0x6334,
	"ZPlotStep":  0x6335,
	"Xres":       0x6336,
	"ZXres":      0x6337,

	"Sequential": 0x7e00,
	"Simul":      0x7e01,
	"PolarGC":    0x7e02,
	"RectGC":     0x7e03,
	"CoordOn":    0x7e04,
	"CoordOff":   0x7e05,
	"Connected":  0x7e06,
	"Dot":        0x7e07,
	"AxesOn":     0x7e08,
	"AxesOff":    0x7e09,
	"GridOn":     0x7e0a,
	"GridOff":    0x7e0b,
	"LabelOn":    0x7e0c,
	"LabelOff":   0x7e0d,
	"Web":        0x7e0e,
	"Time":       0x7e0f,
	"uvAxes":     0x7e10,
	"vwAxes":     0x7e11,
	"uwAxes":     0x7e12,

	"Str1": 0xaa00,
	"Str2": 0xaa01,
	"Str3": 0xaa02,
	"Str4": 0xaa03,
	"Str5": 0xaa04,
	"Str6": 0xaa05,
	"Str7": 0xaa06,
	"Str8": 0xaa07,
	"Str9": 0xaa08,
	"Str0": 0xaa09,

	"npv(":          0xBB00,
	"irr(":          0xBB01,
	"bal(":          0xBB02,
	"sigmaprn(":     0xBB03,
	"sigmaInt(":     0xBB04,
	"Nom(":          0xBB05,
	"EFf(":          0xBB06,
	"dbd(":          0xBB07,
	"lcm(":          0xBB08,
	"gcd(":          0xBB09,
	"randInt(":      0xBB0a,
	"randBin(":      0xBB0b,
	"sub(":          0xBB0c,
	"stdDev(":       0xBB0d,
	"variance(":     0xBB0e,
	"inString(":     0xBB0f,
	"normalcdf(":    0xBB10,
	"invNorm(":      0xBB11,
	"tcdf(":         0xBB12,
	"chisquarecdf(": 0xBB13,
	"Fcdf(":         0xBB14,
	"binompdf(":     0xBB15,
	"binomcdf(":     0xBB16,
	"poissonpdf(":   0xBB17,
	"poissoncdf(":   0xBB18,
	"geometpdf(":    0xBB19,
	"geometcdf(":    0xBB1a,
	"normalpdf(":    0xBB1b,
	"tpdf(":         0xBB1c,
	"chisquarepdf(": 0xBB1d,
	"Fpdf(":         0xBB1e,
	"randNorm(":     0xBB1f,
	"tvm_Pmt":       0xBB20,
	"tvm_I%":        0xBB21,
	"tvm_PV":        0xBB22,
	"tvm_N":         0xBB23,
	"tvm_FV":        0xBB24,
	"conj(":         0xBB25,
	"real(":         0xBB26,
	"imag(":         0xBB27,
	"angle(":        0xBB28,
	"cumSum(":       0xBB29,
	"expr(":         0xBB2a,
	"length(":       0xBB2b,
	"deltaList":     0xBB2c,
	"rEF(":          0xBB2d,
	"rrEF(":         0xBB2e,
	"Rect":          0xBB2f,
	"->Polar":       0xBB30,
	// "e":              0xBB31, // the constant
	"SinReg":         0xBB32,
	"Logistic":       0xBB33,
	"LinRegTTest":    0xBB34,
	"ShadeNorm(":     0xBB35,
	"Shade_t(":       0xBB36,
	"Shadex^2":       0xBB37,
	"ShadEF(":        0xBB38,
	"Matrlist(":      0xBB39,
	"Listmatr(":      0xBB3a,
	"Z-Test(":        0xBB3b,
	"T-Test(":        0xBB3c,
	"2-SampleZTest(": 0xBB3d,
	"1-PropZTest(":   0xBB3e,
	"2-PropZTest(":   0xBB3f,
	"x^2-Test(":      0xBB40,
	"ZInterval":      0xBB41,
	"2-SampZInt(":    0xBB42,
	"1-PropZInt(":    0xBB43,
	"2-PropZInt(":    0xBB44,
	"GraphStyle(":    0xBB45,
	"2-SampTTest":    0xBB46,
	"2-SampFTest":    0xBB47,
	"TInterval":      0xBB48,
	"2-SampTint":     0xBB49,
	"SetUpEditor":    0xBB4a,
	"Pmt_End":        0xBB4b,
	"Pmt_Bgn":        0xBB4c,
	"Real":           0xBB4d,
	"re^θi":          0xBB4e,
	"a+bi":           0xBB4f,
	"ExprOn":         0xBB50,
	"ExprOff":        0xBB51,
	"ClrAllLists":    0xBB52,
	"GetCalc(":       0xBB53,
	"DelVar":         0xBB54,
	"EquString(":     0xBB55,
	"StringEqu(":     0xBB56,
	"ClearEntries":   0xBB57,
	"Select(":        0xBB58,
	"ANOVA(":         0xBB59,
	"ModBoxplot":     0xBB5a,
	"NormProbPlot":   0xBB5b,
	"G-T":            0xBB64,
	"ZoomFit":        0xBB65,
	"DiagnosticOn":   0xBB66,
	"DiagnosticOff":  0xBB67,
	"Archive":        0xBB68,
	"UnArchive":      0xBB69,
	"Asm(":           0xBB6a,
	"AsmComp(":       0xBB6b,
	"AsmPrgm":        0xBB6c,
	"Á":              0xBB6e,
	"À":              0xBB6f,
	"Â":              0xBB70,
	"Ä":              0xBB71,
	"á":              0xBB72,
	"à":              0xBB73,
	"â":              0xBB74,
	"ä":              0xBB75,

	"a": 0xBBb0,
	"b": 0xBBb1,
	"c": 0xBBb2,
	"d": 0xBBb3,
	"e": 0xBBb4, // the ascii, basically don't need it anymore
	"f": 0xBBb5,
	"g": 0xBBb6,
	"h": 0xBBb7,
	"i": 0xBBb8,
	"j": 0xBBb9,
	"k": 0xBBba,
	"l": 0xBBbc,
	"m": 0xBBbd,
	"n": 0xBBbe,
	"o": 0xBBbf,
	"p": 0xBBc0,
	"q": 0xBBc1,
	"r": 0xBBc2,
	"s": 0xBBc3,
	"t": 0xBBc4,
	"u": 0xBBc5,
	"v": 0xBBc6,
	"w": 0xBBc7,
	"x": 0xBBc8,
	"y": 0xBBc9,
	"z": 0xBBca,

	"σ":              0xBBcb,
	"τ":              0xBBcc,
	"Í":              0xBBcd,
	"GarbageCollect": 0xBBce,
	"~":              0xBBcf,
	"@":              0xBBd1,
	"#":              0xBBd2,
	"$":              0xBBd3,
	"&":              0xBBd4,
	"`":              0xBBd5,
	";":              0xBBd6,
	"\\":             0xBBd7,
	"|":              0xBBd8,
	"_":              0xBBd9,
	"%":              0xBBda,
	"...":            0xBBdb,

	"setDate(":      0xEF00,
	"setTime(":      0xEF01,
	"checkTmr(":     0xEF02,
	"setDtFmt(":     0xEF03,
	"setTmFmt(":     0xEF04,
	"timeCnv(":      0xEF05,
	"datOfWk(":      0xEF06,
	"getDtStr":      0xEF07,
	"getTmStr(":     0xEF08,
	"getDate":       0xEF09,
	"getTime":       0xEF0a,
	"startTmr":      0xEF0b,
	"getDtFmt":      0xEF0c,
	"getTmFmt":      0xEF0d,
	"isClockOn":     0xEF0e,
	"ClockOff":      0xEF0f,
	"ClockOn":       0xEF10,
	"OpenLib(":      0xEF11,
	"ExecLib":       0xEF12,
	"invT(":         0xEF13,
	"X^2GOF-Test(":  0xEF14,
	"LinRegTInt":    0xEF15,
	"Manual-Fit":    0xEF16,
	"ZQuadrant1":    0xEF17,
	"ZFrac1/2":      0xEF18,
	"ZFrac1/3":      0xEF19,
	"ZFrac1/4":      0xEF1a,
	"ZFrac1/5":      0xEF1b,
	"ZFrac1/8":      0xEF1c,
	"ZFrac1/10":     0xEF1d,
	"mathprintbox":  0xEF1e,
	"->n/d<-->Un/d": 0xEF30,
	"->F<-->D":      0xEF31,
	"remainder(":    0xEF32,
	"summation(":    0xEF33,
	"logBASE(":      0xEF34,
	"randIntNoRep(": 0xEF35,
	"MATHPRINT":     0xEF36,
	"CLASS":         0xEF37,
	"n/d":           0xEF38,
	"Un/d":          0xEF39,
	"AUTO":          0xEF3a,
	"DEC":           0xEF3b,
	"FRAC":          0xEF3c,
	"FRAC-APPROX":   0xEF3d,
	"Image1":        0xEF50,
	"Image2":        0xEF51,
	"Image3":        0xEF52,
	"Image4":        0xEF53,
	"Image5":        0xEF54,
	"Image6":        0xEF55,
	"Image7":        0xEF56,
	"Image8":        0xEF57,
	"Image9":        0xEF58,
	"Image0":        0xEF59,
	"Gridline":      0xEF5a,
	"BackgroundOn":  0xEF5b,
	"BackgroundOff": 0xEF64,
	"GraphColor(":   0xEF65,
	"TextColor(":    0xEF67,
	"Asm84CPrgm":    0xEF68,
	"DetectAsymOn":  0xEF6a,
	"DetectAsymOff": 0xEF6b,
	"BorderColor":   0xEF6c,
	"tinydotplot":   0xEF73,
	"Thin":          0xEF74,
	"Dot-Thin":      0xEF75,
	"PlySmth2":      0xEF79,
	"Asm84CEPrgm":   0xEF7a,
	"u(n-2)":        0xEF82,
	"v(n-2)":        0xEF83,
	"w(n-2)":        0xEF84,
	"u(n-1)":        0xEF85,
	"v(n-1)":        0xEF86,
	"w(n-1)":        0xEF87,
	"u(n)":          0xEF88,
	"v(n)":          0xEF89,
	"w(n)":          0xEF8a,
	"u(n+1)":        0xEF8b,
	"v(n+1)":        0xEF8c,
	"w(n+1)":        0xEF8d,
	"pieceWise(":    0xEF8e,
	"SEQ(n)":        0xEF8f,
	"SEQ(n+1)":      0xEF90,
	"SEQ(n+2)":      0xEF91,
	"LEFT":          0xEF92,
	"CENTER":        0xEF93,
	"RIGHT":         0xEF94,
	"invBinom(":     0xEF95,
	"Wait":          0xEF96,
	"toString(":     0xEF97,
	"eval":          0xEF98,
	"BLUE":          0xEF41,
	"RED":           0xEF42,
	"BLACK":         0xEF43,
	"MAGENTA":       0xEF44,
	"GREEN":         0xEF45,
	"ORANGE":        0xEF46,
	"BROWN":         0xEF47,
	"NAVY":          0xEF48,
	"LTBLUE":        0xEF49,
	"YELLOW":        0xEF4a,
	"WHITE":         0xEF4b,
	"LTGREY":        0xEF4c,
	"MEDGREY":       0xEF4d,
	"GREY":          0xEF4e,
	"DARKGREY":      0xEF4f,
}

var Tokens = func(m map[string]byte, n map[string]uint16) map[Token]interface{} {
	p := map[Token]interface{}{}
	for k, v := range m {
		t := Token{k, false}
		p[t] = v
	}
	for k, v := range n {
		t := Token{k, true}
		p[t] = v
	}
	return p
}(oneBytes, twoBytes)

var revTokens = func(m map[Token]interface{}) map[interface{}]Token {
	n := make(map[interface{}]Token)
	for k, v := range m {
		n[v] = k
	}
	return n
}(Tokens)
